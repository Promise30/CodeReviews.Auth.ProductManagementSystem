@model Promise.ProductManagementSystem.Areas.Admin.ViewModels.ChangeStaffPasswordViewModel
@{
    ViewData["Title"] = "Change Staff Password";
}

<h1 class="display-4">Change Password</h1>
<p>Change the password for staff member: <strong>@Model.Email</strong></p>
<br />

<div class="row">
    <div class="col-md-6">
        <form asp-action="ChangePassword" method="post">
            <input type="hidden" asp-for="UserId" />
            <input type="hidden" asp-for="Email" />

            <div class="form-group mb-3">
                <label asp-for="NewPassword" class="form-label"></label>
                <div class="input-group">
                    <input asp-for="NewPassword" class="form-control" type="password" id="newPassword" />
                    <button type="button" class="btn btn-outline-secondary" onclick="togglePasswordVisibility('newPassword', this)">
                        <i class="fas fa-eye" id="newPasswordIcon"></i>
                    </button>
                </div>
                <span asp-validation-for="NewPassword" class="text-danger"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="ConfirmPassword" class="form-label"></label>
                <div class="input-group">
                    <input asp-for="ConfirmPassword" class="form-control" type="password" id="confirmPassword" />
                    <button type="button" class="btn btn-outline-secondary" onclick="togglePasswordVisibility('confirmPassword', this)">
                        <i class="fas fa-eye" id="confirmPasswordIcon"></i>
                    </button>
                </div>
                <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
            </div>

            <div class="form-group">
                <input type="submit" value="Change Password" class="btn btn-warning" />
                <a asp-area="Admin" asp-action="Details" asp-route-id="@Model.UserId" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
    <div class="col-md-6">
        <div class="alert alert-info">
            <h6><i class="fas fa-info-circle"></i> Password Requirements:</h6>
            <ul class="mb-0">
                <li>At least 6 characters long</li>
                <li>Must contain at least one uppercase letter</li>
                <li>Must contain at least one digit</li>
                <li>Must contain at least one lowercase letter</li>
            </ul>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        function togglePasswordVisibility(inputId, button) {
            const passwordInput = document.getElementById(inputId);
            const icon = button.querySelector('i');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
    </script>
}